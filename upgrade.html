<!DOCTYPE html>

<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
  <meta name="apple-mobile-web-app-capable" content="yes">
  <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
  <meta name="theme-color" content="#0a0f1e">
  <title>InnerShadow ‚Äì Upgrade to Pro</title>
  <link rel="manifest" href="/manifest.json">
  <link rel="stylesheet" href="/css/main.css">
  <link href="https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,300;0,400;0,500;0,600;0,700;1,300;1,400&family=Fraunces:ital,opsz,wght@0,9..144,300;0,9..144,400;0,9..144,500;1,9..144,300;1,9..144,400&display=swap" rel="stylesheet">
  <style>
    html, body { position: fixed; width: 100%; height: 100%; overflow: hidden; }
    body { display: flex; align-items: center; justify-content: center; background: var(--bg-dark); }
    .shell {
      width: 100%; max-width: 28rem; height: 100vh; height: -webkit-fill-available;
      background: var(--bg-card); display: flex; flex-direction: column;
      position: relative; overflow: hidden;
      border-left: 1px solid var(--border-subtle); border-right: 1px solid var(--border-subtle);
    }
    .scroll-area { flex: 1; overflow-y: auto; overflow-x: hidden; -webkit-overflow-scrolling: touch; scrollbar-width: none; }
    .scroll-area::-webkit-scrollbar { display: none; }
    .inner { padding: max(1.5rem, env(safe-area-inset-top)) 1.25rem max(2rem, env(safe-area-inset-bottom)); }

```
.close-btn {
  position: absolute; top: max(1rem, env(safe-area-inset-top)); right: 1.25rem;
  width: 2.25rem; height: 2.25rem; display: flex; align-items: center; justify-content: center;
  background: var(--bg-card-light); border: 1px solid var(--border-soft); border-radius: 0.625rem;
  color: var(--text-secondary); font-size: 1rem; cursor: pointer; z-index: 10;
  transition: var(--transition-fast);
}
.close-btn:active { transform: scale(0.92); }

/* Hero */
.upgrade-hero { text-align: center; padding: 3rem 0 1.75rem; }
.hero-glow {
  width: 6rem; height: 6rem; border-radius: 50%;
  background: linear-gradient(135deg, rgba(139,92,246,0.8), rgba(20,184,166,0.6));
  display: flex; align-items: center; justify-content: center;
  margin: 0 auto 1.25rem; font-size: 2.5rem;
  box-shadow: 0 0 50px rgba(139,92,246,0.4), 0 0 100px rgba(139,92,246,0.15);
  animation: float 3s ease-in-out infinite;
}
.hero-eyebrow { font-size: 0.75rem; font-weight: 700; letter-spacing: 0.1em; text-transform: uppercase; color: #a78bfa; margin-bottom: 0.5rem; }
.hero-title { font-family: var(--font-display); font-size: 2rem; font-weight: 600; color: var(--text-primary); letter-spacing: -0.025em; line-height: 1.2; margin-bottom: 0.625rem; }
.hero-title em { font-style: italic; color: #a78bfa; }
.hero-sub { font-size: 0.9375rem; color: var(--text-secondary); line-height: 1.65; }

/* What you get */
.features-card { background: var(--bg-card-light); border: 1px solid var(--border-soft); border-radius: 1.25rem; padding: 1.25rem; margin-bottom: 1.25rem; }
.feature-row { display: flex; align-items: flex-start; gap: 0.75rem; margin-bottom: 0.875rem; }
.feature-row:last-child { margin-bottom: 0; }
.feature-icon { font-size: 1.25rem; flex-shrink: 0; margin-top: 0.0625rem; }
.feature-text__title { font-size: 0.9375rem; font-weight: 600; color: var(--text-primary); margin-bottom: 0.15rem; }
.feature-text__sub { font-size: 0.8125rem; color: var(--text-secondary); line-height: 1.5; }

/* Pricing */
.pricing-grid { display: flex; flex-direction: column; gap: 0.625rem; margin-bottom: 1.25rem; }
.price-card {
  background: var(--bg-card-light); border: 2px solid var(--border-soft);
  border-radius: 1.125rem; padding: 1.125rem; cursor: pointer;
  transition: all 0.2s ease; position: relative;
}
.price-card:active { transform: scale(0.98); }
.price-card--selected { border-color: rgba(139,92,246,0.6); background: rgba(139,92,246,0.06); }
.price-card__badge {
  position: absolute; top: -0.625rem; right: 1rem;
  background: linear-gradient(135deg, #7c3aed, #6d28d9);
  color: white; font-size: 0.6875rem; font-weight: 700;
  letter-spacing: 0.04em; text-transform: uppercase;
  padding: 0.2rem 0.625rem; border-radius: 999px;
}
.price-card__row { display: flex; align-items: center; justify-content: space-between; }
.price-card__period { font-size: 0.9375rem; font-weight: 600; color: var(--text-primary); }
.price-card__amount { font-family: var(--font-display); font-size: 1.25rem; font-weight: 700; color: var(--text-primary); }
.price-card__amount span { font-size: 0.8125rem; font-weight: 400; color: var(--text-muted); }
.price-card__sub { font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.25rem; }

/* CTA */
.cta-area {
  padding: 1rem 1.25rem max(1rem, env(safe-area-inset-bottom));
  border-top: 1px solid var(--border-subtle);
  background: rgba(10,15,30,0.95);
  backdrop-filter: blur(10px); -webkit-backdrop-filter: blur(10px);
  flex-shrink: 0;
}
.restore-link { text-align: center; font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.75rem; cursor: pointer; }
.restore-link:active { color: var(--text-secondary); }

.guarantee { text-align: center; font-size: 0.8125rem; color: var(--text-muted); margin-top: 0.875rem; line-height: 1.6; }

@media (min-width: 640px) { .shell { height: 844px; max-height: 92vh; border-radius: 2.5rem; border: 1px solid var(--border-subtle); } }
```

  </style>
</head>
<body>
  <div class="shell">
    <div class="bg-orb bg-orb--teal"></div>
    <div class="bg-orb bg-orb--amber"></div>

```
<div class="scroll-area">
  <div class="inner">
    <button class="close-btn" onclick="Nav.back('/app.html')">‚úï</button>

    <div class="upgrade-hero animate-fade-in">
      <div class="hero-glow">‚ú®</div>
      <p class="hero-eyebrow">InnerShadow Pro</p>
      <h1 class="hero-title">All 24 modules.<br><em>Unlimited access.</em></h1>
      <p class="hero-sub">Everything you need to understand your emotions, know yourself, build real connection, and live deliberately.</p>
    </div>

    <div class="features-card animate-fade-in">
      <div class="feature-row">
        <span class="feature-icon">üìö</span>
        <div class="feature-text">
          <p class="feature-text__title">All 24 modules unlocked</p>
          <p class="feature-text__sub">Complete access to all four pathways ‚Äî Emotional Foundations, Knowing Yourself, Real Connection, and Deliberate Living.</p>
        </div>
      </div>
      <div class="feature-row">
        <span class="feature-icon">üõ†</span>
        <div class="feature-text">
          <p class="feature-text__title">24 personal tools</p>
          <p class="feature-text__sub">Every skill and framework from every module ‚Äî saved, accessible anytime from your toolkit.</p>
        </div>
      </div>
      <div class="feature-row">
        <span class="feature-icon">üìì</span>
        <div class="feature-text">
          <p class="feature-text__title">Full reflection history</p>
          <p class="feature-text__sub">Every worksheet response saved. Return to your insights, track how your thinking changes over time.</p>
        </div>
      </div>
      <div class="feature-row">
        <span class="feature-icon">üîÅ</span>
        <div class="feature-text">
          <p class="feature-text__title">Unlimited replays</p>
          <p class="feature-text__sub">Return to any module whenever you need it. The work compounds over time.</p>
        </div>
      </div>
    </div>

    <div class="pricing-grid animate-fade-in">
      <div class="price-card" id="yearlyCard" onclick="selectPlan('yearly')">
        <div class="price-card__badge">Best value</div>
        <div class="price-card__row">
          <p class="price-card__period">Yearly</p>
          <p class="price-card__amount">$59.99 <span>/ year</span></p>
        </div>
        <p class="price-card__sub">$5.00 per month ‚Äî save 58%</p>
      </div>
      <div class="price-card" id="monthlyCard" onclick="selectPlan('monthly')">
        <div class="price-card__row">
          <p class="price-card__period">Monthly</p>
          <p class="price-card__amount">$11.99 <span>/ month</span></p>
        </div>
        <p class="price-card__sub">Cancel anytime</p>
      </div>
    </div>

    <div class="guarantee animate-fade-in">üîí 7-day money-back guarantee. No questions asked.</div>

    <div style="height:5rem"></div>
  </div>
</div>

<div class="cta-area">
  <button class="btn btn--primary btn--lg" onclick="startCheckout()" id="ctaBtn">
    Start free trial ‚Üí
  </button>
  <p class="restore-link" onclick="restorePurchase()">Restore purchase</p>
</div>
```

  </div>

  <div class="loading-overlay" id="loadingOverlay">
    <div class="loading-spinner"></div>
    <div class="loading-text" id="loadingText">Loading...</div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>

  <script src="/js/supabase-client.js"></script>

  <script src="/js/utils.js"></script>

  <script>
  let selectedPlan = 'yearly';

  function selectPlan(plan) {
    selectedPlan = plan;
    document.getElementById('yearlyCard').classList.toggle('price-card--selected', plan === 'yearly');
    document.getElementById('monthlyCard').classList.toggle('price-card--selected', plan === 'monthly');
  }

  function startCheckout() {
    // Stripe checkout would be integrated here
    alert('Payment integration coming soon. Thank you for your interest in InnerShadow Pro!');
  }

  function restorePurchase() {
    alert('To restore a previous purchase, please contact support@innershadow.app');
  }

  async function init() {
    const session = await Auth.requireAuth('/index.html');
    if (!session) return;

    // Check if already pro
    try {
      const { data } = await DB.getUserState(session.user.id);
      if (data?.is_pro) {
        alert('You already have Pro access!');
        Nav.back('/app.html');
        return;
      }
    } catch (e) {}

    selectPlan('yearly');
    UI.markLoaded();
  }

  document.addEventListener('DOMContentLoaded', init);
  </script>

  <script>if ('serviceWorker' in navigator) navigator.serviceWorker.register('/sw.js').catch(() => {});</script>

</body>
</html>
